here<!DOCTYPE html>
<html lang="sw">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Masanja AI</title>

<style>
*{box-sizing:border-box;font-family:system-ui,Arial}
body{
  margin:0;min-height:100vh;
  background:linear-gradient(135deg,#0f5b3e,#06251c);
  display:flex;align-items:center;justify-content:center;
  color:#fff
}
.app{width:100%;max-width:420px;padding:20px;text-align:center}
h1{margin:5px 0}
.sub{font-size:14px;opacity:.85;margin-bottom:12px}
.output{
  background:#fff;color:#000;border-radius:12px;
  padding:15px;min-height:180px;text-align:left;
  white-space:pre-line;margin-bottom:20px
}
.mic{
  width:90px;height:90px;border-radius:50%;
  border:none;font-size:32px;cursor:pointer;
  background:#2ecc71
}
.mic:active{transform:scale(.95);background:#27ae60}
</style>
</head>

<body>
<div class="app">
  <h1>ðŸ¤– Masanja AI</h1>
  <div class="sub">Msaidizi wa Ufundi kwa Sauti</div>

  <div id="out" class="output">
Karibu Masanja AI.
Bonyeza ðŸŽ¤ uongee nami.
  </div>

  <button id="mic" class="mic">ðŸŽ¤</button>
</div>

<script>
/* ======================================================
   AKILI KAMILI YA MASANJA AI (MAZUNGUMZO + UFUNDI)
====================================================== */
const KNOWLEDGE = [

/* -------- MAZUNGUMZO YA KAWAIDA -------- */
{keys:["habari","mambo","vipi","ukoje","niaje"],
 answer:"Niko salama kabisa. Karibu Masanja AI. Niambie tatizo au swali lako."},

{keys:["wewe ni nani","jina lako","unaitwa nani","wewe nani"],
 answer:"Mimi ni Masanja AI, msaidizi wa ufundi kwa sauti. Nipo kukusaidia kwenye matatizo ya mashine na kazi za ufundi."},

{keys:["unafanya kazi gani","kazi yako","unajua nini"],
 answer:"Ninajua hydraulic, engine, umeme, transmission, usalama wa mashine, na mazungumzo ya kawaida."},

{keys:["asante","ahsante","shukrani"],
 answer:"Karibu sana baba. Nipo hapa kukusaidia wakati wowote."},

/* -------- HYDRAULIC -------- */
{keys:["hydraulic","hydroly","haidrolic","haidroliki","haina nguvu","pressure","haipandishi"],
 answer:"Hydraulic ikiwa haina nguvu, kagua kiwango cha mafuta, pump, valve, na hose zinazovuja."},

{keys:["hydraulic","hydroly","haidrolic","joto","inachemka","kinachemsha","overheat"],
 answer:"Hydraulic ikipata joto, angalia mafuta kama ni machafu au pungufu, kagua oil cooler, na mfumo wa kupooza."},

{keys:["hydraulic","inapiga kelele","noise","inavuma"],
 answer:"Hydraulic ikipiga kelele, kuna hewa kwenye mfumo au pump imechoka. Bleed system na kagua pump."},

/* -------- ENGINE -------- */
{keys:["engine","injini","haiwaki","haianzi","start"],
 answer:"Engine ikikataa kuwaka, angalia betri, fuel, filter, na starter motor."},

{keys:["engine","injini","inazima","inakata"],
 answer:"Engine ikizima ghafla, kagua fuel supply, sensor, na mfumo wa umeme."},

{keys:["engine","injini","joto","overheat","inachemka"],
 answer:"Engine ikipata joto, safisha radiator, hakikisha coolant ipo, na fan inafanya kazi."},

/* -------- UMEME -------- */
{keys:["umeme","electrical","taa","wiring","short","fuse"],
 answer:"Tatizo la umeme hutokana na wiring mbovu, fuse kuchoma, au sensor kuharibika. Kagua connections."},

/* -------- TRANSMISSION -------- */
{keys:["gear","transmission","haibadilishi","inachelewa","slip"],
 answer:"Transmission ikishindwa kubadilisha gear, kagua mafuta ya gearbox, clutch au solenoid."},

/* -------- USALAMA -------- */
{keys:["usalama","hatari","danger","ajali"],
 answer:"Kabla ya kazi yoyote ya ufundi, zima mashine, vaa PPE, na hakikisha eneo ni salama."},

/* -------- FALLBACK (HAIKAI KIMYA) -------- */
{keys:["*"],
 answer:"Nimekuelewa kwa ujumla. Tafadhali eleza zaidi au taja mfumo kama hydraulic, engine, umeme au joto la mashine."}

];

/* ======================================================
   SAUTI â†’ MAANDISHI
====================================================== */
const out = document.getElementById("out");
const micBtn = document.getElementById("mic");

const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
if(!SR){ out.innerText="Browser yako haiungi mkono sauti."; }

const recog = SR ? new SR() : null;
if(recog){
  recog.lang="sw-TZ";
  recog.interimResults=false;
  recog.continuous=false;
}

/* ======================================================
   MAANDISHI â†’ SAUTI
====================================================== */
function speak(text){
  const u = new SpeechSynthesisUtterance(text);
  u.lang="sw-TZ"; u.rate=0.95;
  speechSynthesis.cancel();
  speechSynthesis.speak(u);
}

/* ======================================================
   CHAGUA JIBU BORA
====================================================== */
function getAnswer(text){
  text=text.toLowerCase();
  let bestScore=0, best=null;

  for(const item of KNOWLEDGE){
    if(item.keys.includes("*")) continue;
    let score=0;
    for(const k of item.keys){
      if(text.includes(k)) score++;
    }
    if(score>bestScore){
      bestScore=score;
      best=item.answer;
    }
  }
  if(best) return best;
  return KNOWLEDGE.find(i=>i.keys.includes("*")).answer;
}

/* ======================================================
   MATUKIO
====================================================== */
micBtn.onclick=()=>{
  if(!recog) return;
  out.innerText="ðŸŽ§ Ninasikiliza...";
  recog.start();
};

if(recog){
  recog.onresult=e=>{
    const text=e.results[0][0].transcript;
    const ans=getAnswer(text);
    out.innerText="ðŸ—£ï¸ Umesema:\n"+text+"\n\nðŸ¤– Masanja AI:\n"+ans;
    speak(ans);
  };
  recog.onerror=()=>{
    out.innerText="Kuna tatizo la sauti. Jaribu tena.";
  };
}
</script>
</body>
</html>
