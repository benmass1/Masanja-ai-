
<!DOCTYPE html>
<html lang="sw">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Masanja AI</title>

<style>
*{box-sizing:border-box;font-family:system-ui,Arial}
body{
  margin:0;min-height:100vh;
  background:linear-gradient(135deg,#0f5b3e,#06251c);
  display:flex;align-items:center;justify-content:center;
  color:#fff
}
.app{width:100%;max-width:420px;padding:20px;text-align:center}
h1{margin:5px 0}
.sub{font-size:14px;opacity:.85;margin-bottom:12px}
.output{
  background:#fff;color:#000;border-radius:12px;
  padding:15px;min-height:190px;text-align:left;
  white-space:pre-line;margin-bottom:20px
}
.mic{
  width:90px;height:90px;border-radius:50%;
  border:none;font-size:32px;cursor:pointer;
  background:#2ecc71
}
.mic:active{transform:scale(.95);background:#27ae60}
</style>
</head>

<body>
<div class="app">
  <h1>ðŸ¤– Masanja AI</h1>
  <div class="sub">Msaidizi wa Ufundi kwa Sauti (Kiswahili cha Tanzania)</div>

  <div id="out" class="output">
Karibu Masanja AI.
Bonyeza ðŸŽ¤ uongee nami.
  </div>

  <button id="mic" class="mic">ðŸŽ¤</button>
</div>

<script>
/* ======================================================
   AKILI YA MASANJA AI â€“ KISWAHILI CHA TANZANIA ðŸ‡¹ðŸ‡¿
====================================================== */

/* ===== MAZUNGUMZO YA KAWAIDA (BONGO) ===== */
const CHAT_TZ = [
{keys:["vipi","mambo","poa","fresh","niaje","ukoje"],answer:"Poa kabisa baba. Nipo tayari, sema shida yako."},
{keys:["unasikia","upo","upo hapo"],answer:"Nakusikia poa kabisa. Endelea kuongea."},
{keys:["asante","ahsante","shukrani","nashukuru"],answer:"Sawa baba, karibu sana. Kazi yangu kukusaidia."},
{keys:["nisaidie","msaada","help","niokoe"],answer:"Hakuna noma. Eleza tatizo lilivyo."},
{keys:["sielewi","imenichanganya","nimekwama"],answer:"Hakuna shida. Eleza polepole tuanze pamoja."}
];

/* ===== UTAMBULISHO ===== */
const INTRO_TZ = [
{keys:["wewe ni nani","jina lako","unaitwa nani","wewe nani"],answer:"Mimi ni Masanja AI, msaidizi wako wa ufundi hapa Bongo."},
{keys:["unafanya kazi gani","kazi yako ni nini"],answer:"Kazi yangu ni kukusaidia kwenye hydraulic, injini, umeme na matatizo ya mashine."}
];

/* ===== HYDRAULIC (LUGHA YA FUNDI) ===== */
const HYDRAULIC_TZ = [
{keys:["hydraulic","hydroly","haidrolic","haina nguvu","haipandishi"],answer:"Hydraulic ikikosa nguvu, kuna uwezekano mafuta yamepungua, pump imechoka au hose inavuja."},
{keys:["hydraulic","hydroly","kinachemsha","inachemka","joto kali"],answer:"Hydraulic ikinachemsha, angalia mafuta kama ni machafu, oil cooler imeziba au cooling system ina shida."},
{keys:["hydraulic","inavuma","inapiga kelele","kelele nyingi"],answer:"Hydraulic ikivuma, mara nyingi kuna hewa kwenye mfumo au pump imeanza kuchoka."},
{keys:["hydraulic","inavuja","mafuta yanatoka","oil inatiririka"],answer:"Ukipata uvujaji wa mafuta, kagua hose, seal au fitting. Usifanye kazi bila kurekebisha."},
{keys:["boom","mkono","haipandi","haufanyi"],answer:"Boom isipopanda, tatizo linaweza kuwa valve, pump au pressure imepungua."}
];

/* ===== ENGINE (KIBONGO) ===== */
const ENGINE_TZ = [
{keys:["engine","injini","haiwaki","haianzi"],answer:"Injini ikigoma kuwaka, angalia betri, mafuta yanafika au starter inazunguka."},
{keys:["engine","injini","inakufa","inazima"],answer:"Injini ikizima yenyewe, kuna shida ya mafuta, sensor au umeme."},
{keys:["engine","injini","joto","inachemka","overheat"],answer:"Injini ikipata joto kali, radiator inaweza kuwa chafu au coolant imepungua."},
{keys:["engine","moshi mweusi"],answer:"Moshi mweusi unaonyesha mafuta ni mengi au air filter imeziba."},
{keys:["engine","moshi mweupe"],answer:"Moshi mweupe mara nyingi ni dalili ya maji kuingia kwenye injini."}
];

/* ===== UMEME ===== */
const ELECTRICAL_TZ = [
{keys:["umeme","taa hazifanyi","light zimekufa"],answer:"Kama taa hazifanyi kazi, anza kukagua fuse na wiring."},
{keys:["betri","battery imekufa"],answer:"Betri ikikufa, ichaji au ibadilishe kisha kagua alternator."},
{keys:["starter","haizunguki"],answer:"Starter isipozunguka, angalia betri, relay na starter yenyewe."}
];

/* ===== LUGHA YA MITAANI ===== */
const STREET_TZ = [
{keys:["inazingua","inasumbua","haiko sawa"],answer:"Sawa. Eleza dalili zaidi ili nijue wapi pa kuanzia."},
{keys:["imechoka","imekufa","imeharibika vibaya"],answer:"Inawezekana sehemu imechoka kabisa. Itahitaji ukaguzi wa kina au kubadilishwa."},
{keys:["ni noma","shida tupu"],answer:"Pole baba. Tuangalie hatua kwa hatua mpaka tupate chanzo."}
];

/* ===== FALLBACK (HAIKAI KIMYA) ===== */
const FALLBACK = [
{keys:["*"],answer:"Nimekuelewa kwa ujumla. Eleza zaidi au taja kama ni hydraulic, injini au umeme."}
];

/* ===== KUUNGANISHA YOTE ===== */
const ALL_TZ = [
...CHAT_TZ,
...INTRO_TZ,
...HYDRAULIC_TZ,
...ENGINE_TZ,
...ELECTRICAL_TZ,
...STREET_TZ,
...FALLBACK
];

/* ===== LOGIC YA KUCHAGUA JIBU ===== */
function getAnswer(text){
  text = text.toLowerCase();
  let bestScore = 0;
  let bestAnswer = null;

  for(const item of ALL_TZ){
    if(item.keys.includes("*")) continue;
    let score = 0;
    for(const k of item.keys){
      if(text.includes(k)) score++;
    }
    if(score > bestScore){
      bestScore = score;
      bestAnswer = item.answer;
    }
  }
  return bestAnswer || FALLBACK[0].answer;
}

/* ===== SAUTI â†’ MAANDISHI ===== */
const out = document.getElementById("out");
const micBtn = document.getElementById("mic");

const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
const recog = SR ? new SR() : null;

if(recog){
  recog.lang="sw-TZ";
  recog.interimResults=false;
  recog.continuous=false;
}

/* ===== MAANDISHI â†’ SAUTI ===== */
function speak(text){
  const u = new SpeechSynthesisUtterance(text);
  u.lang="sw-TZ";
  u.rate=0.95;
  speechSynthesis.cancel();
  speechSynthesis.speak(u);
}

/* ===== MATUKIO ===== */
micBtn.onclick=()=>{
  if(!recog){
    out.innerText="Browser yako haiungi mkono sauti.";
    return;
  }
  out.innerText="ðŸŽ§ Ninasikiliza...";
  recog.start();
};

if(recog){
  recog.onresult=e=>{
    const text=e.results[0][0].transcript;
    const ans=getAnswer(text);
    out.innerText="ðŸ—£ï¸ Umesema:\n"+text+"\n\nðŸ¤– Masanja AI:\n"+ans;
    speak(ans);
  };
  recog.onerror=()=>{
    out.innerText="Kuna tatizo la sauti. Jaribu tena.";
  };
}
</script>

</body>
</html>
