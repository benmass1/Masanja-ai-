here<!DOCTYPE html>
<html lang="sw">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Masanja AI</title>

<style>
  * {
    box-sizing: border-box;
    font-family: system-ui, Arial, sans-serif;
  }

  body {
    margin: 0;
    min-height: 100vh;
    background: linear-gradient(135deg, #0f5b3e, #06251c);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
  }

  .app {
    width: 100%;
    max-width: 420px;
    padding: 20px;
    text-align: center;
  }

  h1 {
    margin-bottom: 5px;
  }

  .subtitle {
    font-size: 14px;
    opacity: 0.85;
    margin-bottom: 15px;
  }

  .output {
    background: white;
    color: black;
    border-radius: 12px;
    padding: 15px;
    min-height: 160px;
    text-align: left;
    margin-bottom: 20px;
    white-space: pre-line;
  }

  .mic-btn {
    width: 90px;
    height: 90px;
    border-radius: 50%;
    border: none;
    font-size: 32px;
    background: #2ecc71;
    cursor: pointer;
  }

  .mic-btn:active {
    transform: scale(0.95);
    background: #27ae60;
  }
</style>
</head>
<body>

<div class="app">
  <h1>ðŸ¤– Masanja AI</h1>
  <div class="subtitle">Msaidizi wa Ufundi kwa Sauti</div>

  <div id="output" class="output">
    Karibu Masanja AI. Bonyeza ðŸŽ¤ uanze kuzungumza.
  </div>

  <button id="micBtn" class="mic-btn">ðŸŽ¤</button>
</div>

<script>
/* ===============================
   AKILI YA MASANJA AI (DATA)
================================ */
const KNOWLEDGE = [
  {
    keys: ["wewe ni nani", "jina lako", "unaitwa nani"],
    answer: "Mimi ni Masanja AI, msaidizi wa ufundi kwa sauti. Nipo kukusaidia kutatua matatizo ya mashine."
  },
  {
    keys: ["unafanya kazi gani", "kazi yako"],
    answer: "Ninakusaidia kwenye hydraulic, engine, umeme, na mifumo ya mashine."
  },
  {
    keys: ["hydraulic", "haina nguvu", "pressure"],
    answer: "Hydraulic haina nguvu. Kagua kiwango cha mafuta, hali ya pump, na kama kuna hose inayovuja."
  },
  {
    keys: ["engine", "haiwaki", "haianzi"],
    answer: "Engine ikikataa kuanza, angalia betri, fuel supply, filter, na starter motor."
  },
  {
    keys: ["joto", "overheat", "inachemka"],
    answer: "Mashine ikipata joto, safisha radiator, hakikisha coolant ipo, na fan inafanya kazi."
  }
];

/* ===============================
   SAUTI â†’ MAANDISHI
================================ */
const SpeechRecognition =
  window.SpeechRecognition || window.webkitSpeechRecognition;

const output = document.getElementById("output");
const micBtn = document.getElementById("micBtn");

if (!SpeechRecognition) {
  output.innerText = "Browser yako haiungi mkono sauti.";
}

const recognition = SpeechRecognition ? new SpeechRecognition() : null;

if (recognition) {
  recognition.lang = "sw-TZ";
  recognition.interimResults = false;
  recognition.continuous = false;
}

/* ===============================
   MAANDISHI â†’ SAUTI
================================ */
function speak(text) {
  const u = new SpeechSynthesisUtterance(text);
  u.lang = "sw-TZ";
  u.rate = 0.95;
  speechSynthesis.cancel();
  speechSynthesis.speak(u);
}

/* ===============================
   CHAGUA JIBU BORA
================================ */
function getAnswer(text) {
  text = text.toLowerCase();

  let bestScore = 0;
  let bestAnswer = null;

  for (const item of KNOWLEDGE) {
    let score = 0;
    for (const k of item.keys) {
      if (text.includes(k)) score++;
    }
    if (score > bestScore) {
      bestScore = score;
      bestAnswer = item.answer;
    }
  }

  return bestAnswer || "Samahani, bado sijapata jibu sahihi. Tafadhali eleza zaidi.";
}

/* ===============================
   MATUKIO
================================ */
micBtn.onclick = () => {
  if (!recognition) return;
  output.innerText = "ðŸŽ§ Ninasikiliza...";
  recognition.start();
};

if (recognition) {
  recognition.onresult = (e) => {
    const text = e.results[0][0].transcript;
    const answer = getAnswer(text);

    output.innerText =
      "ðŸ—£ï¸ Umesema:\n" + text +
      "\n\nðŸ¤– Masanja AI:\n" + answer;

    speak(answer);
  };

  recognition.onerror = () => {
    output.innerText = "Kuna tatizo la sauti. Jaribu tena.";
  };
}
</script>

</body>
</html>
