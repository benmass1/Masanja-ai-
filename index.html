here<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Masanja AI</title>

<style>
*{box-sizing:border-box;font-family:system-ui,Arial}
body{
  margin:0;min-height:100vh;
  background:linear-gradient(135deg,#0f5b3e,#06251c);
  display:flex;align-items:center;justify-content:center;
  color:#fff
}
.app{width:100%;max-width:440px;padding:20px;text-align:center}
h1{margin:6px 0}
.sub{font-size:14px;opacity:.85;margin-bottom:12px}
.output{
  background:#fff;color:#000;border-radius:12px;
  padding:15px;min-height:220px;
  text-align:left;white-space:pre-line;margin-bottom:20px
}
.mic{
  width:90px;height:90px;border-radius:50%;
  border:none;font-size:32px;cursor:pointer;background:#2ecc71
}
.mic:active{transform:scale(.95);background:#27ae60}
</style>
</head>

<body>
<div class="app">
  <h1>Masanja AI</h1>
  <div class="sub">Technical Assistant (Answers in English Only)</div>

  <div id="out" class="output">
Welcome to Masanja AI.  
Press ğŸ¤ and speak.
  </div>

  <button id="mic" class="mic">ğŸ¤</button>
</div>

<script>
/* =================================================
   KNOWLEDGE BASE
   INPUT: ANY LANGUAGE (Swahili supported)
   OUTPUT: ENGLISH ONLY
================================================= */

const DATA = [

/* ===== GENERAL CONVERSATION ===== */
{k:["vipi","mambo","hello","hi","hey"],a:"I am ready. Please explain your problem."},
{k:["wewe ni nani","who are you","jina lako"],a:"I am Masanja AI, a technical assistant."},
{k:["nisaidie","help","msaada"],a:"Sure. Describe the issue in detail."},
{k:["asante","thank you"],a:"You are welcome. Ask another question if needed."},

/* ===== HYDRAULIC SYSTEM ===== */
{k:["hydraulic","hydroly","haidrolic","haina nguvu","no power"],a:"If the hydraulic system has low power, check oil level, pump condition, pressure relief valve, and filters."},
{k:["hydraulic","inachemka","overheat","joto"],a:"Hydraulic overheating can be caused by dirty oil, blocked oil cooler, poor airflow, or wrong oil viscosity."},
{k:["hydraulic","inavuma","noise","cavitation"],a:"Hydraulic noise or cavitation usually indicates air in the system, blocked suction line, or worn pump."},
{k:["hydraulic","inavuja","leak","oil leaking"],a:"Oil leakage may come from damaged hoses, loose fittings, worn seals, or O-rings."},

/* ===== ENGINE ===== */
{k:["engine","injini","haiwaki","not starting"],a:"If the engine does not start, check the battery, starter motor, fuel supply, and air filter."},
{k:["engine","inachemka","overheat","joto"],a:"Engine overheating can be caused by low coolant level, blocked radiator, faulty fan, or thermostat failure."},
{k:["engine","moshi mweusi","black smoke"],a:"Black smoke indicates excessive fuel, clogged air filter, or injector problems."},
{k:["engine","moshi mweupe","white smoke"],a:"White smoke may indicate coolant entering the combustion chamber or cold injector issues."},
{k:["engine","knocking","noise"],a:"Engine knocking can result from incorrect timing, poor lubrication, or low fuel quality."},

/* ===== LUBRICATION ===== */
{k:["oil pressure","oil light","shinikizo la mafuta"],a:"Low oil pressure may be caused by low oil level, worn oil pump, or clogged oil filter."},

/* ===== ELECTRICAL ===== */
{k:["umeme","electrical","taa hazifanyi","lights not working"],a:"Electrical faults can be caused by blown fuses, damaged wiring, poor grounding, or faulty switches."},
{k:["battery","betri imekufa","low voltage"],a:"A dead battery may be caused by charging system failure, bad terminals, or an old battery."},
{k:["alternator","haichaji","not charging"],a:"If the alternator is not charging, check the drive belt, wiring connections, and alternator condition."},

/* ===== TRANSMISSION ===== */
{k:["gear","transmission","haibadilishi","not shifting"],a:"Transmission shifting problems may be caused by low oil level, worn clutches, or faulty solenoids."},

/* ===== FALLBACK ===== */
{k:["*"],a:"I understand your question, but please provide more technical details about the problem."}
];

function getAnswer(text){
  text=text.toLowerCase();
  let best=null,score=0;
  for(const d of DATA){
    if(d.k.includes("*")) continue;
    let s=0;
    for(const w of d.k){ if(text.includes(w)) s++; }
    if(s>score){ score=s; best=d.a; }
  }
  return best || DATA.find(d=>d.k.includes("*")).a;
}

/* ===== VOICE: SINGLE MALE VOICE (ENGLISH) ===== */
let voiceChosen=null;
function initVoice(){
  const voices=speechSynthesis.getVoices();
  if(voices.length>0){ voiceChosen=voices[0]; }
}
speechSynthesis.onvoiceschanged=initVoice;

function speak(text){
  if(!voiceChosen) initVoice();
  const u=new SpeechSynthesisUtterance(text);
  u.voice=voiceChosen;
  u.lang="en-US";
  u.rate=0.9;
  u.pitch=0.7;
  speechSynthesis.cancel();
  speechSynthesis.speak(u);
}

/* ===== SPEECH RECOGNITION ===== */
const out=document.getElementById("out");
const mic=document.getElementById("mic");
const SR=window.SpeechRecognition||window.webkitSpeechRecognition;
const rec=SR?new SR():null;

if(rec){
  rec.lang="sw-TZ"; // user can speak Swahili
  rec.interimResults=false;
  rec.continuous=false;
}

mic.onclick=()=>{
  if(!rec){ out.innerText="Speech recognition not supported."; return; }
  out.innerText="ğŸ§ Listening...";
  rec.start();
};

if(rec){
  rec.onresult=e=>{
    const t=e.results[0][0].transcript;
    const a=getAnswer(t);
    out.innerText="ğŸ—£ï¸ You said:\n"+t+"\n\nğŸ¤– Masanja AI:\n"+a;
    speak(a);
  };
}
</script>
</body>
</html>
